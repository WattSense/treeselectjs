var qi=Object.defineProperty;var ji=(C,p,f)=>p in C?qi(C,p,{enumerable:!0,configurable:!0,writable:!0,value:f}):C[p]=f;var r=(C,p,f)=>(ji(C,typeof p!="symbol"?p+"":p,f),f),xt=(C,p,f)=>{if(!p.has(C))throw TypeError("Cannot "+f)};var n=(C,p,f)=>(xt(C,p,"read from private field"),f?f.call(C):p.get(C)),c=(C,p,f)=>{if(p.has(C))throw TypeError("Cannot add the same private member more than once");p instanceof WeakSet?p.add(C):p.set(C,f)},g=(C,p,f,Y)=>(xt(C,p,"write to private field"),Y?Y.call(C,f):p.set(C,f),f);var o=(C,p,f)=>(xt(C,p,"access private method"),f);(function(C,p){typeof exports=="object"&&typeof module<"u"?module.exports=p():typeof define=="function"&&define.amd?define(p):(C=typeof globalThis<"u"?globalThis:C||self,C.Treeselect=p())})(this,function(){var A,E,H,S,fe,Ut,G,ce,Ce,Yt,be,Kt,M,he,B,j,ge,Xt,ke,Jt,we,Zt,ve,Qt,Ee,es,Le,ts,ye,ss,Se,is,xe,ls,_e,ns,Ae,as,Oe,os,Te,rs,Ne,cs,Pe,hs,Ie,ds,K,_t,F,V,x,X,Be,us,Ve,ps,De,ms,He,fs,Ge,Cs,Me,bs,J,At,Fe,gs,qe,ks,je,ws,Z,Ot,ze,vs,Re,Es,We,Ls,$e,ys,Ue,Ss,Ye,xs,Ke,_s,Xe,As,Je,Os,Ze,Ts,Qe,Ns,Q,Tt,ee,Nt,et,Ps,u,m,z,te,R,O,T,_,D,se,Pt,ie,It,tt,Is,st,Bs,it,Vs,lt,Ds,nt,Hs,at,Gs,le,Bt,ot,Ms,rt,Fs,ct,qs,ht,js,ne,Vt,dt,zs,W,kt,ae,Dt,$,wt,ut,Rs,oe,Ht,pt,Ws,mt,$s,ft,Us,Ct,Ys,bt,Ks;"use strict";const C="",p={arrowUp:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 15l-6-6-6 6"/></svg>',arrowDown:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9l6 6 6-6"/></svg>',arrowRight:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18l6-6-6-6"/></svg>',attention:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>',clear:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>',cross:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',check:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>',partialCheck:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line></svg>'},f=(l,e)=>{if(e.innerHTML="",typeof l=="string")e.innerHTML=l;else{const t=l.cloneNode(!0);e.appendChild(t)}},Y=l=>{const e=l?{...l}:{};return Object.keys(p).forEach(t=>{e[t]||(e[t]=p[t])}),e},Xs=l=>l.reduce((e,{name:t},s)=>(e+=t,s<l.length-1&&(e+=", "),e),"");class Js{constructor({value:e,showTags:t,tagsCountText:s,clearable:i,isAlwaysOpened:a,searchable:h,placeholder:d,disabled:k,isSingleSelect:b,id:w,ariaLabel:v,iconElements:L,showPlaceholderOnOpen:y,inputCallback:N,searchCallback:P,openCallback:q,closeCallback:U,keydownCallback:re,focusCallback:yt,blurCallback:gt,nameChangeCallback:St}){c(this,fe);c(this,G);c(this,Ce);c(this,be);c(this,M);c(this,B);c(this,ge);c(this,ke);c(this,we);c(this,ve);c(this,Ee);c(this,Le);c(this,ye);c(this,Se);c(this,xe);c(this,_e);c(this,Ae);c(this,Oe);c(this,Te);c(this,Ne);c(this,Pe);c(this,Ie);c(this,K);r(this,"value");r(this,"showTags");r(this,"tagsCountText");r(this,"clearable");r(this,"isAlwaysOpened");r(this,"searchable");r(this,"placeholder");r(this,"disabled");r(this,"isSingleSelect");r(this,"id");r(this,"ariaLabel");r(this,"iconElements");r(this,"showPlaceholderOnOpen");r(this,"isOpened");r(this,"searchText");r(this,"srcElement");c(this,A,void 0);c(this,E,void 0);c(this,H,void 0);c(this,S,void 0);r(this,"inputCallback");r(this,"searchCallback");r(this,"openCallback");r(this,"closeCallback");r(this,"keydownCallback");r(this,"focusCallback");r(this,"blurCallback");r(this,"nameChangeCallback");this.value=e,this.showTags=t,this.tagsCountText=s,this.searchable=h,this.placeholder=d,this.clearable=i,this.isAlwaysOpened=a,this.disabled=k,this.isSingleSelect=b,this.id=w,this.ariaLabel=v,this.iconElements=L,this.showPlaceholderOnOpen=y??!1,this.isOpened=!1,this.searchText="",g(this,A,o(this,we,Zt).call(this)),g(this,E,o(this,xe,ls).call(this)),g(this,H,o(this,Oe,os).call(this)),g(this,S,null),this.inputCallback=N,this.searchCallback=P,this.openCallback=q,this.closeCallback=U,this.keydownCallback=re,this.focusCallback=yt,this.blurCallback=gt,this.nameChangeCallback=St,this.srcElement=o(this,ge,Xt).call(this,n(this,A),n(this,E),n(this,H)),o(this,fe,Ut).call(this)}focus(){setTimeout(()=>n(this,E).focus(),0)}blur(){this.isOpened&&o(this,B,j).call(this),this.clearSearch(),n(this,E).blur()}updateValue(e){this.value=e,o(this,G,ce).call(this),o(this,M,he).call(this)}removeItem(e){this.value=this.value.filter(t=>t.id!==e),o(this,K,_t).call(this),o(this,G,ce).call(this),o(this,M,he).call(this)}clear(){this.value=[],o(this,K,_t).call(this),o(this,G,ce).call(this),this.clearSearch()}openClose(){o(this,B,j).call(this)}clearSearch(){this.searchText="",this.searchCallback(""),o(this,M,he).call(this)}}A=new WeakMap,E=new WeakMap,H=new WeakMap,S=new WeakMap,fe=new WeakSet,Ut=function(){o(this,G,ce).call(this),o(this,M,he).call(this),o(this,Ce,Yt).call(this)},G=new WeakSet,ce=function(){if(n(this,A).innerHTML="",this.showTags){n(this,A).append(...o(this,ve,Qt).call(this));const e=Xs(this.value);this.nameChangeCallback(e)}else{const e=o(this,Se,is).call(this);n(this,A).appendChild(e),this.nameChangeCallback(e.innerText)}n(this,A).appendChild(n(this,E))},Ce=new WeakSet,Yt=function(){const e=[];n(this,H).innerHTML="",this.clearable&&e.push(o(this,Te,rs).call(this)),this.isAlwaysOpened||e.push(o(this,Pe,hs).call(this,this.isOpened)),e.length&&n(this,H).append(...e)},be=new WeakSet,Kt=function(){if(!this.isAlwaysOpened&&n(this,S)){const e=this.isOpened?this.iconElements.arrowUp:this.iconElements.arrowDown;f(e,n(this,S))}},M=new WeakSet,he=function(){var e;(e=this.value)!=null&&e.length?(n(this,E).removeAttribute("placeholder"),this.srcElement.classList.remove("treeselect-input--value-not-selected")):(n(this,E).setAttribute("placeholder",this.placeholder),this.srcElement.classList.add("treeselect-input--value-not-selected")),this.searchable?this.srcElement.classList.remove("treeselect-input--unsearchable"):this.srcElement.classList.add("treeselect-input--unsearchable"),this.isSingleSelect?this.srcElement.classList.add("treeselect-input--is-single-select"):this.srcElement.classList.remove("treeselect-input--is-single-select"),n(this,E).value=this.searchText},B=new WeakSet,j=function(){this.isOpened=!this.isOpened,o(this,be,Kt).call(this);const e=n(this,A).querySelector(".treeselect-input__tags-count");this.isOpened?(this.showPlaceholderOnOpen&&this.isSingleSelect&&this.value.length&&(e==null||e.setAttribute("style","display: none;"),n(this,E).setAttribute("placeholder",this.placeholder)),this.openCallback()):(this.showPlaceholderOnOpen&&this.isSingleSelect&&this.value.length&&(e==null||e.setAttribute("style","display: block;"),n(this,E).removeAttribute("placeholder")),this.closeCallback())},ge=new WeakSet,Xt=function(e,t,s){const i=document.createElement("div");return i.classList.add("treeselect-input"),i.setAttribute("tabindex","-1"),i.addEventListener("mousedown",a=>o(this,ke,Jt).call(this,a)),i.addEventListener("focus",()=>this.focusCallback(),!0),i.addEventListener("blur",()=>this.blurCallback(),!0),e.appendChild(t),i.append(e,s),i},ke=new WeakSet,Jt=function(e){e.stopPropagation(),this.isOpened||o(this,B,j).call(this),this.focus()},we=new WeakSet,Zt=function(){const e=document.createElement("div");return e.classList.add("treeselect-input__tags"),e},ve=new WeakSet,Qt=function(){return this.value.map(e=>{const t=document.createElement("div");t.classList.add("treeselect-input__tags-element"),t.setAttribute("tabindex","-1"),t.setAttribute("tag-id",e.id.toString()),t.setAttribute("title",e.name);const s=o(this,Le,ts).call(this,e.name),i=o(this,ye,ss).call(this);return t.addEventListener("mousedown",a=>o(this,Ee,es).call(this,a,e.id)),t.append(s,i),t})},Ee=new WeakSet,es=function(e,t){e.preventDefault(),e.stopPropagation(),this.removeItem(t),this.focus()},Le=new WeakSet,ts=function(e){const t=document.createElement("span");return t.classList.add("treeselect-input__tags-name"),t.textContent=e,t},ye=new WeakSet,ss=function(){const e=document.createElement("span");return e.classList.add("treeselect-input__tags-cross"),f(this.iconElements.cross,e),e},Se=new WeakSet,is=function(){const e=document.createElement("span");if(e.classList.add("treeselect-input__tags-count"),!this.value.length)return e.textContent="",e.setAttribute("title",""),e;const t=this.value.length===1?this.value[0].name:`${this.value.length} ${this.tagsCountText}`;return e.textContent=t,e.setAttribute("title",t),e},xe=new WeakSet,ls=function(){const e=document.createElement("input");return e.classList.add("treeselect-input__edit"),this.id&&e.setAttribute("id",this.id),(!this.searchable||this.disabled)&&e.setAttribute("readonly","readonly"),this.disabled&&e.setAttribute("tabindex","-1"),this.ariaLabel.length&&e.setAttribute("aria-label",this.ariaLabel),e.addEventListener("keydown",t=>o(this,_e,ns).call(this,t)),e.addEventListener("input",t=>o(this,Ae,as).call(this,t,e)),e},_e=new WeakSet,ns=function(e){e.stopPropagation();const t=e.key;t==="Backspace"&&!this.searchText.length&&this.value.length&&!this.showTags&&this.clear(),t==="Backspace"&&!this.searchText.length&&this.value.length&&this.removeItem(this.value[this.value.length-1].id),e.code==="Space"&&(!this.searchText||!this.searchable)&&o(this,B,j).call(this),(t==="Enter"||t==="ArrowDown"||t==="ArrowUp")&&e.preventDefault(),this.keydownCallback(e),t!=="Tab"&&this.focus()},Ae=new WeakSet,as=function(e,t){e.stopPropagation();const s=this.searchText,i=t.value.trim();if(s.length===0&&i.length===0){t.value="";return}if(this.searchable){const a=e.target.value;this.searchCallback(a),this.isOpened||o(this,B,j).call(this)}else t.value="";this.searchText=t.value},Oe=new WeakSet,os=function(){const e=document.createElement("div");return e.classList.add("treeselect-input__operators"),e},Te=new WeakSet,rs=function(){const e=document.createElement("span");return e.classList.add("treeselect-input__clear"),e.setAttribute("tabindex","-1"),f(this.iconElements.clear,e),e.addEventListener("mousedown",t=>o(this,Ne,cs).call(this,t)),e},Ne=new WeakSet,cs=function(e){e.preventDefault(),e.stopPropagation(),(this.searchText.length||this.value.length)&&this.clear(),this.focus()},Pe=new WeakSet,hs=function(e){g(this,S,document.createElement("span")),n(this,S).classList.add("treeselect-input__arrow");const t=e?this.iconElements.arrowUp:this.iconElements.arrowDown;return f(t,n(this,S)),n(this,S).addEventListener("mousedown",s=>o(this,Ie,ds).call(this,s)),n(this,S)},Ie=new WeakSet,ds=function(e){e.stopPropagation(),e.preventDefault(),this.focus(),o(this,B,j).call(this)},K=new WeakSet,_t=function(){this.inputCallback(this.value)};const vt=(l,e,t,s)=>{ti(e);const i=e.filter(a=>!a.disabled&&l.some(h=>h===a.id));if(t&&i.length){i[0].checked=!0;return}i.forEach(a=>{a.checked=!0;const h=Et(a,e,s);a.checked=h})},Et=({id:l,checked:e},t,s)=>{const i=t.find(h=>h.id===l);if(!i)return!1;if(s)return i.checked=i.disabled?!1:!!e,i.checked;const a=Gt(!!e,i,t);return Mt(i,t),a},Gt=(l,e,t)=>{if(!e.isGroup)return e.checked=e.disabled?!1:!!l,e.isPartialChecked=!1,e.checked;const s=t.filter(d=>d.childOf===e.id);return!l||e.disabled||e.isPartialChecked?(e.checked=!1,e.isPartialChecked=!1,Lt(e,s,t),e.checked):Ft(s,t)?qt(s)?(e.checked=!1,e.isPartialChecked=!1,e.disabled=!0,e.checked):(e.checked=!1,e.isPartialChecked=!0,s.forEach(d=>{Gt(l,d,t)}),e.checked):(e.checked=!0,e.isPartialChecked=!1,Lt(e,s,t),e.checked)},Mt=(l,e)=>{const t=e.find(s=>s.id===l.childOf);t&&(Zs(t,e),Mt(t,e))},Zs=(l,e)=>{const t=de(l,e);if(qt(t)){l.checked=!1,l.isPartialChecked=!1,l.disabled=!0;return}if(Qs(t)){l.checked=!0,l.isPartialChecked=!1;return}if(ei(t)){l.checked=!1,l.isPartialChecked=!0;return}l.checked=!1,l.isPartialChecked=!1},Lt=({checked:l,disabled:e},t,s)=>{t.forEach(i=>{i.disabled=!!e||!!i.disabled,i.checked=!!l&&!i.disabled,i.isPartialChecked=!1;const a=de(i,s);Lt({checked:l,disabled:e},a,s)})},Ft=(l,e)=>l.some(i=>i.disabled)?!0:l.some(i=>{if(i.isGroup){const a=de(i,e);return Ft(a,e)}return!1}),qt=l=>l.every(e=>!!e.disabled),Qs=l=>l.every(e=>!!e.checked),ei=l=>l.some(e=>!!e.checked||!!e.isPartialChecked),ti=l=>{l.forEach(e=>{e.checked=!1,e.isPartialChecked=!1})},si=(l,e,t)=>{const s={level:0,groupId:""},i=jt(l,e,s.groupId,s.level);return li(i,t)},jt=(l,e,t,s)=>l.reduce((i,a)=>{var b;const h=!!((b=a.children)!=null&&b.length),d=s>=e&&h,k=s>e;if(i.push({id:a.value,name:a.name,childOf:t,isGroup:h,checked:!1,isPartialChecked:!1,level:s,isClosed:d,hidden:k,disabled:a.disabled??!1}),h){const w=jt(a.children,e,a.value,s+1);i.push(...w)}return i},[]),de=({id:l},e)=>e.filter(t=>t.childOf===l),ii=l=>{const{ungroupedNodes:e,allGroupedNodes:t,allNodes:s}=l.reduce((a,h)=>(h.checked&&(a.allNodes.push(h),h.isGroup?a.allGroupedNodes.push(h):a.ungroupedNodes.push(h)),a),{ungroupedNodes:[],allGroupedNodes:[],allNodes:[]}),i=s.filter(a=>!t.some(({id:h})=>h===a.childOf));return{ungroupedNodes:e,groupedNodes:i,allNodes:s}},li=(l,e)=>(l.filter(s=>!!s.disabled).forEach(({id:s})=>Et({id:s,checked:!1},l,e)),l),ue=(l,{id:e,isClosed:t})=>{de({id:e},l).forEach(i=>{i.hidden=t??!1,i.isGroup&&!i.isClosed&&ue(l,{id:i.id,isClosed:t})})},ni=l=>{l.filter(e=>e.isGroup&&!e.disabled&&(e.checked||e.isPartialChecked)).forEach(e=>{e.isClosed=!1,ue(l,e)})},ai=(l,e)=>{const t=oi(l,e);l.forEach(s=>{t.some(({id:a})=>a===s.id)?(s.isGroup&&(s.isClosed=!1,ue(l,s)),s.hidden=!1):s.hidden=!0})},oi=(l,e)=>l.reduce((t,s)=>{if(s.name.toLowerCase().includes(e.toLowerCase())){if(t.push(s),s.isGroup){const a=zt(s.id,l);t.push(...a)}if(s.childOf){const a=Rt(s.childOf,l);t.push(...a)}}return t},[]),zt=(l,e)=>e.reduce((t,s)=>(s.childOf===l&&(t.push(s),s.isGroup&&t.push(...zt(s.id,e))),t),[]),Rt=(l,e)=>e.reduce((t,s)=>(s.id===l&&(t.push(s),s.childOf&&t.push(...Rt(s.childOf,e))),t),[]),ri=l=>{const{duplications:e}=l.reduce((t,s)=>(t.allItems.some(i=>i.toString()===s.id.toString())&&t.duplications.push(s.id),t.allItems.push(s.id),t),{duplications:[],allItems:[]});e.length&&console.error(`Validation: You have duplicated values: ${e.join(", ")}! You should use unique values.`)},ci=(l,e,t,s,i,a,h,d,k,b,w,v)=>{vt(l,e,i,k),d&&h&&ni(e),pe(e,t,s,a,b,w,v)},pe=(l,e,t,s,i,a,h)=>{l.forEach(d=>{const k=e.querySelector(`[input-id="${d.id}"]`),b=I(k);k.checked=d.checked,hi(d,b,s),di(d,b),ui(d,b),pi(d,b,t),mi(d,b),Ci(d,b,l,i,a,h),fi(d,k,t)}),bi(l,e)},hi=(l,e,t)=>{l.checked?e.classList.add("treeselect-list__item--checked"):e.classList.remove("treeselect-list__item--checked"),Array.isArray(t)&&t[0]===l.id&&!l.disabled?e.classList.add("treeselect-list__item--single-selected"):e.classList.remove("treeselect-list__item--single-selected")},di=(l,e)=>{l.isPartialChecked?e.classList.add("treeselect-list__item--partial-checked"):e.classList.remove("treeselect-list__item--partial-checked")},ui=(l,e)=>{l.disabled?e.classList.add("treeselect-list__item--disabled"):e.classList.remove("treeselect-list__item--disabled")},pi=(l,e,t)=>{if(l.isGroup){const s=e.querySelector(".treeselect-list__item-icon"),i=l.isClosed?t.arrowRight:t.arrowDown;f(i,s),l.isClosed?e.classList.add("treeselect-list__item--closed"):e.classList.remove("treeselect-list__item--closed")}},mi=(l,e)=>{l.hidden?e.classList.add("treeselect-list__item--hidden"):e.classList.remove("treeselect-list__item--hidden")},fi=(l,e,t)=>{const i=e.parentNode.querySelector(".treeselect-list__item-checkbox-icon");l.checked?f(t.check,i):l.isPartialChecked?f(t.partialCheck,i):i.innerHTML=""},Ci=(l,e,t,s,i,a)=>{if(l.level===0){const d=t.some(w=>w.isGroup&&w.level===l.level),k=!l.isGroup&&d?i:a,b=(l.isGroup?a:k)+"px";s?e.style.paddingRight=b:e.style.paddingLeft=b}else{const d=l.isGroup?`${a+l.level*i}px`:`${a+l.level*i+i}px`;s?e.style.paddingRight=d:e.style.paddingLeft=d}e.setAttribute("level",l.level.toString()),e.setAttribute("group",l.isGroup.toString())},bi=(l,e)=>{const t=l.some(i=>!i.hidden),s=e.querySelector(".treeselect-list__empty");t?s.classList.add("treeselect-list__empty--hidden"):s.classList.remove("treeselect-list__empty--hidden")},I=l=>l.parentNode.parentNode,Wt=(l,e)=>e.find(t=>t.id.toString()===l),gi=l=>I(l).querySelector(".treeselect-list__item-icon"),ki=(l,e)=>{e&&Object.keys(e).forEach(t=>{const s=e[t];typeof s=="string"&&l.setAttribute(t,s)})};class wi{constructor({options:e,value:t,openLevel:s,listSlotHtmlComponent:i,emptyText:a,isSingleSelect:h,iconElements:d,unselectOnClickSingleSelected:k,showCount:b,disabledBranchNode:w,expandSelected:v,isIndependentNodes:L,rtl:y,defaultPadding:N,zeroLevelItemPadding:P,inputCallback:q,arrowClickCallback:U,mouseupCallback:re}){c(this,Be);c(this,Ve);c(this,De);c(this,He);c(this,Ge);c(this,Me);c(this,J);c(this,Fe);c(this,qe);c(this,je);c(this,Z);c(this,ze);c(this,Re);c(this,We);c(this,$e);c(this,Ue);c(this,Ye);c(this,Ke);c(this,Xe);c(this,Je);c(this,Ze);c(this,Qe);c(this,Q);c(this,ee);c(this,et);r(this,"options");r(this,"value");r(this,"openLevel");r(this,"listSlotHtmlComponent");r(this,"emptyText");r(this,"isSingleSelect");r(this,"showCount");r(this,"disabledBranchNode");r(this,"expandSelected");r(this,"isIndependentNodes");r(this,"rtl");r(this,"defaultPadding");r(this,"zeroLevelItemPadding");r(this,"iconElements");r(this,"unselectOnClickSingleSelected");r(this,"searchText");r(this,"flattedOptions");r(this,"flattedOptionsBeforeSearch");r(this,"selectedNodes");r(this,"srcElement");r(this,"inputCallback");r(this,"arrowClickCallback");r(this,"mouseupCallback");c(this,F,null);c(this,V,!0);c(this,x,[]);c(this,X,!0);this.options=e,this.value=t,this.openLevel=s??0,this.listSlotHtmlComponent=i??null,this.emptyText=a??"No results found...",this.isSingleSelect=h??!1,this.showCount=b??!1,this.disabledBranchNode=w??!1,this.expandSelected=v??!1,this.isIndependentNodes=L??!1,this.rtl=y??!1,this.defaultPadding=N??20,this.zeroLevelItemPadding=P??5,this.iconElements=d,this.unselectOnClickSingleSelected=k??!1,this.searchText="",this.flattedOptions=si(this.options,this.openLevel,this.isIndependentNodes),this.flattedOptionsBeforeSearch=this.flattedOptions,this.selectedNodes={nodes:[],groupedNodes:[],allNodes:[]},this.srcElement=o(this,De,ms).call(this),this.inputCallback=q,this.arrowClickCallback=U,this.mouseupCallback=re,ri(this.flattedOptions)}updateValue(e){this.value=e,g(this,x,this.isSingleSelect?this.value:[]),ci(e,this.flattedOptions,this.srcElement,this.iconElements,this.isSingleSelect,n(this,x),this.expandSelected,n(this,X),this.isIndependentNodes,this.rtl,this.defaultPadding,this.zeroLevelItemPadding),g(this,X,!1),o(this,ee,Nt).call(this)}updateSearchValue(e){if(e===this.searchText)return;const t=this.searchText===""&&e!=="";this.searchText=e,t&&(this.flattedOptionsBeforeSearch=JSON.parse(JSON.stringify(this.flattedOptions))),this.searchText===""&&(this.flattedOptions=this.flattedOptionsBeforeSearch.map(s=>{const i=this.flattedOptions.find(a=>a.id===s.id);return i.isClosed=s.isClosed,i.hidden=s.hidden,i}),this.flattedOptionsBeforeSearch=[]),this.searchText&&ai(this.flattedOptions,e),pe(this.flattedOptions,this.srcElement,this.iconElements,n(this,x),this.rtl,this.defaultPadding,this.zeroLevelItemPadding),this.focusFirstListElement()}callKeyAction(e){g(this,V,!1);const t=this.srcElement.querySelector(".treeselect-list__item--focused");if(t==null?void 0:t.classList.contains("treeselect-list__item--hidden"))return;const i=e.key;i==="Enter"&&t&&t.dispatchEvent(new Event("mousedown")),(i==="ArrowLeft"||i==="ArrowRight")&&o(this,Be,us).call(this,t,e),(i==="ArrowDown"||i==="ArrowUp")&&o(this,Ve,ps).call(this,t,i)}focusFirstListElement(){const e="treeselect-list__item--focused",t=this.srcElement.querySelector(`.${e}`),s=Array.from(this.srcElement.querySelectorAll(".treeselect-list__item-checkbox")).filter(a=>window.getComputedStyle(I(a)).display!=="none");if(!s.length)return;t&&t.classList.remove(e),I(s[0]).classList.add(e)}isLastFocusedElementExist(){return!!n(this,F)}}F=new WeakMap,V=new WeakMap,x=new WeakMap,X=new WeakMap,Be=new WeakSet,us=function(e,t){if(!e)return;const s=t.key,a=e.querySelector(".treeselect-list__item-checkbox").getAttribute("input-id"),h=Wt(a,this.flattedOptions),d=e.querySelector(".treeselect-list__item-icon");s==="ArrowLeft"&&!h.isClosed&&h.isGroup&&(d.dispatchEvent(new Event("mousedown")),t.preventDefault()),s==="ArrowRight"&&h.isClosed&&h.isGroup&&(d.dispatchEvent(new Event("mousedown")),t.preventDefault())},Ve=new WeakSet,ps=function(e,t){var i;const s=Array.from(this.srcElement.querySelectorAll(".treeselect-list__item-checkbox")).filter(a=>window.getComputedStyle(I(a)).display!=="none");if(s.length)if(!e)I(s[0]).classList.add("treeselect-list__item--focused");else{const a=s.findIndex(P=>I(P).classList.contains("treeselect-list__item--focused"));I(s[a]).classList.remove("treeselect-list__item--focused");const d=t==="ArrowDown"?a+1:a-1,k=t==="ArrowDown"?0:s.length-1,b=s[d]??s[k],w=!s[d],v=I(b);v.classList.add("treeselect-list__item--focused");const L=this.srcElement.getBoundingClientRect(),y=v.getBoundingClientRect();if(w&&t==="ArrowDown"){this.srcElement.scroll(0,0);return}if(w&&t==="ArrowUp"){this.srcElement.scroll(0,this.srcElement.scrollHeight);return}const N=((i=this.listSlotHtmlComponent)==null?void 0:i.clientHeight)??0;if(L.y+L.height<y.y+y.height+N){this.srcElement.scroll(0,this.srcElement.scrollTop+y.height);return}if(L.y>y.y){this.srcElement.scroll(0,this.srcElement.scrollTop-y.height);return}}},De=new WeakSet,ms=function(){const e=o(this,He,fs).call(this),t=o(this,J,At).call(this,this.options);e.append(...t);const s=o(this,qe,ks).call(this);e.append(s);const i=o(this,Fe,gs).call(this);return i&&e.append(i),e},He=new WeakSet,fs=function(){const e=document.createElement("div");return e.classList.add("treeselect-list"),this.isSingleSelect&&e.classList.add("treeselect-list--single-select"),this.disabledBranchNode&&e.classList.add("treeselect-list--disabled-branch-node"),e.addEventListener("mouseout",t=>o(this,Ge,Cs).call(this,t)),e.addEventListener("mousemove",()=>o(this,Me,bs).call(this)),e.addEventListener("mouseup",()=>this.mouseupCallback(),!0),e},Ge=new WeakSet,Cs=function(e){e.stopPropagation(),n(this,F)&&n(this,V)&&n(this,F).classList.add("treeselect-list__item--focused")},Me=new WeakSet,bs=function(){g(this,V,!0)},J=new WeakSet,At=function(e){return e.reduce((t,s)=>{var a;if((a=s.children)!=null&&a.length){const h=o(this,je,ws).call(this,s),d=o(this,J,At).call(this,s.children);return h.append(...d),t.push(h),t}const i=o(this,Z,Ot).call(this,s,!1);return t.push(i),t},[])},Fe=new WeakSet,gs=function(){if(!this.listSlotHtmlComponent)return null;const e=document.createElement("div");return e.classList.add("treeselect-list__slot"),e.appendChild(this.listSlotHtmlComponent),e},qe=new WeakSet,ks=function(){const e=document.createElement("div");e.classList.add("treeselect-list__empty"),e.setAttribute("title",this.emptyText);const t=document.createElement("span");t.classList.add("treeselect-list__empty-icon"),f(this.iconElements.attention,t);const s=document.createElement("span");return s.classList.add("treeselect-list__empty-text"),s.textContent=this.emptyText,e.append(t,s),e},je=new WeakSet,ws=function(e){const t=document.createElement("div");t.setAttribute("group-container-id",e.value.toString()),t.classList.add("treeselect-list__group-container");const s=o(this,Z,Ot).call(this,e,!0);return t.appendChild(s),t},Z=new WeakSet,Ot=function(e,t){const s=o(this,ze,vs).call(this,e);if(t){const h=o(this,Ue,Ss).call(this);s.appendChild(h),s.classList.add("treeselect-list__item--group")}const i=o(this,Ke,_s).call(this,e),a=o(this,Xe,As).call(this,e,t);return s.append(i,a),s},ze=new WeakSet,vs=function(e){const t=document.createElement("div");return ki(t,e.htmlAttr),t.setAttribute("tabindex","-1"),t.setAttribute("title",e.name),t.classList.add("treeselect-list__item"),t.addEventListener("mouseover",()=>o(this,Re,Es).call(this,t),!0),t.addEventListener("mouseout",()=>o(this,We,Ls).call(this,t),!0),t.addEventListener("mousedown",s=>o(this,$e,ys).call(this,s,e)),t},Re=new WeakSet,Es=function(e){n(this,V)&&o(this,Q,Tt).call(this,!0,e)},We=new WeakSet,Ls=function(e){n(this,V)&&(o(this,Q,Tt).call(this,!1,e),g(this,F,e))},$e=new WeakSet,ys=function(e,t){var a;if(e.preventDefault(),e.stopPropagation(),(a=this.flattedOptions.find(h=>h.id===t.value))==null?void 0:a.disabled)return;const i=e.target.querySelector(".treeselect-list__item-checkbox");i.checked=!i.checked,o(this,Ze,Ts).call(this,i,t)},Ue=new WeakSet,Ss=function(){const e=document.createElement("span");return e.setAttribute("tabindex","-1"),e.classList.add("treeselect-list__item-icon"),f(this.iconElements.arrowDown,e),e.addEventListener("mousedown",t=>o(this,Ye,xs).call(this,t)),e},Ye=new WeakSet,xs=function(e){e.preventDefault(),e.stopPropagation(),o(this,Qe,Ns).call(this,e)},Ke=new WeakSet,_s=function(e){const t=document.createElement("div");t.classList.add("treeselect-list__item-checkbox-container");const s=document.createElement("span");s.classList.add("treeselect-list__item-checkbox-icon"),s.innerHTML="";const i=document.createElement("input");return i.setAttribute("tabindex","-1"),i.setAttribute("type","checkbox"),i.setAttribute("input-id",e.value.toString()),i.classList.add("treeselect-list__item-checkbox"),t.append(s,i),t},Xe=new WeakSet,As=function(e,t){const s=document.createElement("label");if(s.textContent=e.name,s.classList.add("treeselect-list__item-label"),t&&this.showCount){const i=o(this,Je,Os).call(this,e);s.appendChild(i)}return s},Je=new WeakSet,Os=function(e){const t=document.createElement("span"),s=this.flattedOptions.filter(i=>i.childOf===e.value);return t.textContent=`(${s.length})`,t.classList.add("treeselect-list__item-label-counter"),t},Ze=new WeakSet,Ts=function(e,t){const s=this.flattedOptions.find(i=>i.id===t.value);if(s){if(s!=null&&s.isGroup&&this.disabledBranchNode){const i=gi(e);i==null||i.dispatchEvent(new Event("mousedown"));return}if(this.isSingleSelect){const[i]=n(this,x);if(s.id===i)if(this.unselectOnClickSingleSelected)g(this,x,[]),vt([],this.flattedOptions,this.isSingleSelect,this.isIndependentNodes);else return;else g(this,x,[s.id]),vt([s.id],this.flattedOptions,this.isSingleSelect,this.isIndependentNodes)}else{s.checked=e.checked;const i=Et(s,this.flattedOptions,this.isIndependentNodes);e.checked=i}pe(this.flattedOptions,this.srcElement,this.iconElements,n(this,x),this.rtl,this.defaultPadding,this.zeroLevelItemPadding),o(this,et,Ps).call(this)}},Qe=new WeakSet,Ns=function(e){var a,h;const t=(h=(a=e.target)==null?void 0:a.parentNode)==null?void 0:h.querySelector("[input-id]"),s=(t==null?void 0:t.getAttribute("input-id"))??null,i=Wt(s,this.flattedOptions);i&&(i.isClosed=!i.isClosed,ue(this.flattedOptions,i),pe(this.flattedOptions,this.srcElement,this.iconElements,n(this,x),this.rtl,this.defaultPadding,this.zeroLevelItemPadding),this.arrowClickCallback(i.id,i.isClosed))},Q=new WeakSet,Tt=function(e,t){const s="treeselect-list__item--focused";if(e){const i=Array.from(this.srcElement.querySelectorAll(`.${s}`));i.length&&i.forEach(a=>a.classList.remove(s)),t.classList.add(s)}else t.classList.remove(s)},ee=new WeakSet,Nt=function(){const{ungroupedNodes:e,groupedNodes:t,allNodes:s}=ii(this.flattedOptions);this.selectedNodes={nodes:e,groupedNodes:t,allNodes:s}},et=new WeakSet,Ps=function(){o(this,ee,Nt).call(this),this.inputCallback(this.selectedNodes),this.value=this.selectedNodes.nodes.map(e=>e.id)};const $t=({parentHtmlContainer:l,staticList:e,appendToBody:t,isSingleSelect:s,value:i,direction:a})=>{l||console.error("Validation: parentHtmlContainer prop is required!"),e&&t&&console.error("Validation: You should set staticList to false if you use appendToBody!"),s&&Array.isArray(i)&&console.error("Validation: if you use isSingleSelect prop, you should pass a single value!"),!s&&!Array.isArray(i)&&console.error("Validation: you should pass an array as a value!"),a&&a!=="auto"&&a!=="bottom"&&a!=="top"&&console.error("Validation: you should pass (auto | top | bottom | undefined) as a value for the direction prop!")},me=l=>l.map(e=>e.id),vi=l=>l?Array.isArray(l)?l:[l]:[],Ei=(l,e)=>{if(e){const[t]=l;return t??null}return l};class Li{constructor({parentHtmlContainer:e,value:t,options:s,openLevel:i,appendToBody:a,alwaysOpen:h,showTags:d,tagsCountText:k,clearable:b,searchable:w,placeholder:v,grouped:L,isGroupedValue:y,listSlotHtmlComponent:N,disabled:P,emptyText:q,staticList:U,id:re,ariaLabel:yt,isSingleSelect:gt,showCount:St,disabledBranchNode:yi,direction:Si,expandSelected:xi,saveScrollPosition:_i,isIndependentNodes:Ai,rtl:Oi,defaultPadding:Ti,zeroLevelItemPadding:Ni,iconElements:Pi,showPlaceholderOnOpen:Ii,unselectOnClickSingleSelected:Bi,inputCallback:Vi,openCallback:Di,closeCallback:Hi,nameChangeCallback:Gi,searchCallback:Mi,openCloseGroupCallback:Fi}){c(this,se);c(this,ie);c(this,tt);c(this,st);c(this,it);c(this,lt);c(this,nt);c(this,at);c(this,le);c(this,ot);c(this,rt);c(this,ct);c(this,ht);c(this,ne);c(this,dt);c(this,W);c(this,ae);c(this,$);c(this,ut);c(this,oe);c(this,pt);c(this,mt);c(this,ft);c(this,Ct);c(this,bt);r(this,"parentHtmlContainer");r(this,"value");r(this,"options");r(this,"openLevel");r(this,"appendToBody");r(this,"alwaysOpen");r(this,"showTags");r(this,"tagsCountText");r(this,"clearable");r(this,"searchable");r(this,"placeholder");r(this,"grouped");r(this,"isGroupedValue");r(this,"listSlotHtmlComponent");r(this,"disabled");r(this,"emptyText");r(this,"staticList");r(this,"id");r(this,"ariaLabel");r(this,"isSingleSelect");r(this,"showCount");r(this,"disabledBranchNode");r(this,"direction");r(this,"expandSelected");r(this,"saveScrollPosition");r(this,"isIndependentNodes");r(this,"rtl");r(this,"defaultPadding");r(this,"zeroLevelItemPadding");r(this,"iconElements");r(this,"showPlaceholderOnOpen");r(this,"unselectOnClickSingleSelected");r(this,"inputCallback");r(this,"openCallback");r(this,"closeCallback");r(this,"nameChangeCallback");r(this,"searchCallback");r(this,"openCloseGroupCallback");r(this,"ungroupedValue");r(this,"groupedValue");r(this,"allValue");r(this,"isListOpened");r(this,"selectedName");r(this,"srcElement");c(this,u,null);c(this,m,null);c(this,z,null);c(this,te,0);c(this,R,0);c(this,O,null);c(this,T,null);c(this,_,null);c(this,D,null);$t({parentHtmlContainer:e,value:t,staticList:U,appendToBody:a,isSingleSelect:gt}),this.parentHtmlContainer=e,this.value=[],this.options=s??[],this.openLevel=i??0,this.appendToBody=a??!1,this.alwaysOpen=!!(h&&!P),this.showTags=d??!0,this.tagsCountText=k??"elements selected",this.clearable=b??!0,this.searchable=w??!0,this.placeholder=v??"Search...",this.grouped=L??!0,this.isGroupedValue=y??!1,this.listSlotHtmlComponent=N??null,this.disabled=P??!1,this.emptyText=q??"No results found...",this.staticList=!!(U&&!this.appendToBody),this.id=re??"",this.ariaLabel=yt??"",this.isSingleSelect=gt??!1,this.showCount=St??!1,this.disabledBranchNode=yi??!1,this.direction=Si??"auto",this.expandSelected=xi??!1,this.saveScrollPosition=_i??!0,this.isIndependentNodes=Ai??!1,this.rtl=Oi??!1,this.defaultPadding=Ti??20,this.zeroLevelItemPadding=Ni??5,this.iconElements=Y(Pi),this.showPlaceholderOnOpen=Ii??!1,this.unselectOnClickSingleSelected=Bi??!1,this.inputCallback=Vi,this.openCallback=Di,this.closeCallback=Hi,this.nameChangeCallback=Gi,this.searchCallback=Mi,this.openCloseGroupCallback=Fi,this.ungroupedValue=[],this.groupedValue=[],this.allValue=[],this.isListOpened=!1,this.selectedName="",this.srcElement=null,o(this,se,Pt).call(this,t)}mount(){$t({parentHtmlContainer:this.parentHtmlContainer,value:this.value,staticList:this.staticList,appendToBody:this.appendToBody,isSingleSelect:this.isSingleSelect}),this.iconElements=Y(this.iconElements),o(this,se,Pt).call(this,this.value)}updateValue(e){const t=vi(e),s=n(this,u);s&&(s.updateValue(t),o(this,le,Bt).call(this,s==null?void 0:s.selectedNodes))}destroy(){this.srcElement&&(o(this,ne,Vt).call(this),this.srcElement.innerHTML="",this.srcElement=null,o(this,$,wt).call(this,!0))}focus(){n(this,m)&&n(this,m).focus()}toggleOpenClose(){n(this,m)&&(n(this,m).openClose(),n(this,m).focus())}scrollWindowHandler(){this.updateListPosition()}focusWindowHandler(e){var s,i,a;((s=this.srcElement)==null?void 0:s.contains(e.target))||((i=n(this,u))==null?void 0:i.srcElement.contains(e.target))||((a=n(this,m))==null||a.blur(),o(this,$,wt).call(this,!1),o(this,W,kt).call(this,!1))}blurWindowHandler(){var e;(e=n(this,m))==null||e.blur(),o(this,$,wt).call(this,!1),o(this,W,kt).call(this,!1)}updateListPosition(){var N;const e=this.srcElement,t=(N=n(this,u))==null?void 0:N.srcElement;if(!e||!t)return;const{height:s}=t.getBoundingClientRect(),{x:i,y:a,height:h,width:d}=e.getBoundingClientRect(),k=window.innerHeight,b=a,w=k-a-h;let v=b>w&&b>=s&&w<s;if(this.direction!=="auto"&&(v=this.direction==="top"),this.appendToBody){(t.style.top!=="0px"||t.style.left!=="0px")&&(t.style.top="0px",t.style.left="0px");const P=i+window.scrollX,q=v?a+window.scrollY-s:a+window.scrollY+h;t.style.transform=`translate(${P}px,${q}px)`,t.style.width=`${d}px`}const L=v?"top":"bottom";t.getAttribute("direction")!==L&&(t.setAttribute("direction",L),o(this,dt,zs).call(this,v,this.appendToBody))}}return u=new WeakMap,m=new WeakMap,z=new WeakMap,te=new WeakMap,R=new WeakMap,O=new WeakMap,T=new WeakMap,_=new WeakMap,D=new WeakMap,se=new WeakSet,Pt=function(e){var a;this.destroy();const{container:t,list:s,input:i}=o(this,tt,Is).call(this);this.srcElement=t,g(this,u,s),g(this,m,i),g(this,O,this.scrollWindowHandler.bind(this)),g(this,T,this.scrollWindowHandler.bind(this)),g(this,_,this.focusWindowHandler.bind(this)),g(this,D,this.blurWindowHandler.bind(this)),this.alwaysOpen&&((a=n(this,m))==null||a.openClose()),this.disabled?this.srcElement.classList.add("treeselect--disabled"):this.srcElement.classList.remove("treeselect--disabled"),this.updateValue(e??this.value)},ie=new WeakSet,It=function({groupedNodes:e,nodes:t,allNodes:s}){this.ungroupedValue=t?me(t):[],this.groupedValue=e?me(e):[],this.allValue=s?me(s):[];let i=[];this.isIndependentNodes||this.isSingleSelect?i=this.allValue:this.isGroupedValue?i=this.groupedValue:i=this.ungroupedValue,this.value=Ei(i,this.isSingleSelect)},tt=new WeakSet,Is=function(){const e=this.parentHtmlContainer;e.classList.add("treeselect"),this.rtl&&e.setAttribute("dir","rtl");const t=new wi({value:[],options:this.options,openLevel:this.openLevel,listSlotHtmlComponent:this.listSlotHtmlComponent,emptyText:this.emptyText,isSingleSelect:this.isSingleSelect,showCount:this.showCount,disabledBranchNode:this.disabledBranchNode,expandSelected:this.expandSelected,isIndependentNodes:this.isIndependentNodes,rtl:this.rtl,defaultPadding:this.defaultPadding,zeroLevelItemPadding:this.zeroLevelItemPadding,iconElements:this.iconElements,unselectOnClickSingleSelected:this.unselectOnClickSingleSelected,inputCallback:i=>o(this,ot,Ms).call(this,i),arrowClickCallback:(i,a)=>o(this,rt,Fs).call(this,i,a),mouseupCallback:()=>{var i;return(i=n(this,m))==null?void 0:i.focus()}}),s=new Js({value:[],showTags:this.showTags,tagsCountText:this.tagsCountText,clearable:this.clearable,isAlwaysOpened:this.alwaysOpen,searchable:this.searchable,placeholder:this.placeholder,disabled:this.disabled,isSingleSelect:this.isSingleSelect,id:this.id,ariaLabel:this.ariaLabel,iconElements:this.iconElements,showPlaceholderOnOpen:this.showPlaceholderOnOpen,inputCallback:i=>o(this,st,Bs).call(this,i),searchCallback:i=>o(this,lt,Ds).call(this,i),openCallback:()=>o(this,ht,js).call(this),closeCallback:()=>o(this,ne,Vt).call(this),keydownCallback:i=>o(this,it,Vs).call(this,i),focusCallback:()=>o(this,nt,Hs).call(this),blurCallback:()=>o(this,at,Gs).call(this),nameChangeCallback:i=>o(this,ct,qs).call(this,i)});return this.appendToBody&&g(this,z,new ResizeObserver(()=>this.updateListPosition())),e.append(s.srcElement),{container:e,list:t,input:s}},st=new WeakSet,Bs=function(e){var i,a;const t=me(e);(i=n(this,u))==null||i.updateValue(t);const s=((a=n(this,u))==null?void 0:a.selectedNodes)??{};o(this,ie,It).call(this,s),o(this,oe,Ht).call(this)},it=new WeakSet,Vs=function(e){var t;this.isListOpened&&((t=n(this,u))==null||t.callKeyAction(e))},lt=new WeakSet,Ds=function(e){n(this,R)&&clearTimeout(n(this,R)),g(this,R,window.setTimeout(()=>{var t;(t=n(this,u))==null||t.updateSearchValue(e),this.updateListPosition()},350)),o(this,Ct,Ys).call(this,e)},nt=new WeakSet,Hs=function(){o(this,W,kt).call(this,!0),n(this,_)&&n(this,_)&&n(this,D)&&(document.addEventListener("mousedown",n(this,_),!0),document.addEventListener("focus",n(this,_),!0),window.addEventListener("blur",n(this,D)))},at=new WeakSet,Gs=function(){setTimeout(()=>{var s,i;const e=(s=n(this,m))==null?void 0:s.srcElement.contains(document.activeElement),t=(i=n(this,u))==null?void 0:i.srcElement.contains(document.activeElement);!e&&!t&&this.blurWindowHandler()},1)},le=new WeakSet,Bt=function(e){var s;if(!e)return;let t=[];this.isIndependentNodes||this.isSingleSelect?t=e.allNodes:this.grouped?t=e.groupedNodes:t=e.nodes,(s=n(this,m))==null||s.updateValue(t),o(this,ie,It).call(this,e)},ot=new WeakSet,Ms=function(e){var t,s,i;o(this,le,Bt).call(this,e),this.isSingleSelect&&!this.alwaysOpen&&((t=n(this,m))==null||t.openClose(),(s=n(this,m))==null||s.clearSearch()),(i=n(this,m))==null||i.focus(),o(this,oe,Ht).call(this)},rt=new WeakSet,Fs=function(e,t){var s;(s=n(this,m))==null||s.focus(),this.updateListPosition(),o(this,bt,Ks).call(this,e,t)},ct=new WeakSet,qs=function(e){this.selectedName!==e&&(this.selectedName=e,o(this,pt,Ws).call(this))},ht=new WeakSet,js=function(){var e;this.isListOpened=!0,n(this,O)&&n(this,T)&&(window.addEventListener("scroll",n(this,O),!0),window.addEventListener("resize",n(this,T))),!(!n(this,u)||!this.srcElement)&&(this.appendToBody?(document.body.appendChild(n(this,u).srcElement),(e=n(this,z))==null||e.observe(this.srcElement)):this.srcElement.appendChild(n(this,u).srcElement),this.updateListPosition(),o(this,ae,Dt).call(this,!0),o(this,ut,Rs).call(this),o(this,mt,$s).call(this))},ne=new WeakSet,Vt=function(){var t;this.alwaysOpen||(this.isListOpened=!1,n(this,O)&&n(this,T)&&(window.removeEventListener("scroll",n(this,O),!0),window.removeEventListener("resize",n(this,T))),!n(this,u)||!this.srcElement)||!(this.appendToBody?document.body.contains(n(this,u).srcElement):this.srcElement.contains(n(this,u).srcElement))||(g(this,te,n(this,u).srcElement.scrollTop),this.appendToBody?(document.body.removeChild(n(this,u).srcElement),(t=n(this,z))==null||t.disconnect()):this.srcElement.removeChild(n(this,u).srcElement),o(this,ae,Dt).call(this,!1),o(this,ft,Us).call(this))},dt=new WeakSet,zs=function(e,t){if(!n(this,u)||!n(this,m))return;const s=t?"treeselect-list--top-to-body":"treeselect-list--top",i=t?"treeselect-list--bottom-to-body":"treeselect-list--bottom";e?(n(this,u).srcElement.classList.add(s),n(this,u).srcElement.classList.remove(i),n(this,m).srcElement.classList.add("treeselect-input--top"),n(this,m).srcElement.classList.remove("treeselect-input--bottom")):(n(this,u).srcElement.classList.remove(s),n(this,u).srcElement.classList.add(i),n(this,m).srcElement.classList.remove("treeselect-input--top"),n(this,m).srcElement.classList.add("treeselect-input--bottom"))},W=new WeakSet,kt=function(e){!n(this,m)||!n(this,u)||(e?(n(this,m).srcElement.classList.add("treeselect-input--focused"),n(this,u).srcElement.classList.add("treeselect-list--focused")):(n(this,m).srcElement.classList.remove("treeselect-input--focused"),n(this,u).srcElement.classList.remove("treeselect-list--focused")))},ae=new WeakSet,Dt=function(e){var t,s,i,a;e?(t=n(this,m))==null||t.srcElement.classList.add("treeselect-input--opened"):(s=n(this,m))==null||s.srcElement.classList.remove("treeselect-input--opened"),this.staticList?(i=n(this,u))==null||i.srcElement.classList.add("treeselect-list--static"):(a=n(this,u))==null||a.srcElement.classList.remove("treeselect-list--static")},$=new WeakSet,wt=function(e){!n(this,O)||!n(this,T)||!n(this,_)||!n(this,D)||((!this.alwaysOpen||e)&&(window.removeEventListener("scroll",n(this,O),!0),window.removeEventListener("resize",n(this,T))),document.removeEventListener("mousedown",n(this,_),!0),document.removeEventListener("focus",n(this,_),!0),window.removeEventListener("blur",n(this,D)))},ut=new WeakSet,Rs=function(){var t,s,i;const e=(t=n(this,u))==null?void 0:t.isLastFocusedElementExist();this.saveScrollPosition&&e?(s=n(this,u))==null||s.srcElement.scroll(0,n(this,te)):(i=n(this,u))==null||i.focusFirstListElement()},oe=new WeakSet,Ht=function(){var e;(e=this.srcElement)==null||e.dispatchEvent(new CustomEvent("input",{detail:this.value})),this.inputCallback&&this.inputCallback(this.value)},pt=new WeakSet,Ws=function(){var e;(e=this.srcElement)==null||e.dispatchEvent(new CustomEvent("name-change",{detail:this.selectedName})),this.nameChangeCallback&&this.nameChangeCallback(this.selectedName)},mt=new WeakSet,$s=function(){var e;this.alwaysOpen||((e=this.srcElement)==null||e.dispatchEvent(new CustomEvent("open",{detail:this.value})),this.openCallback&&this.openCallback(this.value))},ft=new WeakSet,Us=function(){var e;this.alwaysOpen||((e=this.srcElement)==null||e.dispatchEvent(new CustomEvent("close",{detail:this.value})),this.closeCallback&&this.closeCallback(this.value))},Ct=new WeakSet,Ys=function(e){var s;const t=(e==null?void 0:e.trim())??"";(s=this.srcElement)==null||s.dispatchEvent(new CustomEvent("search",{detail:t})),this.searchCallback&&this.searchCallback(t)},bt=new WeakSet,Ks=function(e,t){var s;(s=this.srcElement)==null||s.dispatchEvent(new CustomEvent("open-close-group",{detail:{groupId:e,isClosed:t}})),this.openCloseGroupCallback&&this.openCloseGroupCallback(e,t)},Li});
